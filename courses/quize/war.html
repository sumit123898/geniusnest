<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ইতিহাসের যুদ্ধ | History Battle</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Teko:wght@400;500;600&display=swap');
        
        :root {
            --primary: #8e44ad;
            --secondary: #3498db;
            --correct: #2ecc71;
            --wrong: #e74c3c;
            --dark-bg: #121212;
            --darker-bg: #0a0a0a;
            --card-bg: #1e1e1e;
            --text: #f5f5f5;
            --text-dim: #b0b0b0;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'SolaimanLipi', Arial, sans-serif;
            background-color: var(--dark-bg);
            color: var(--text);
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-image: radial-gradient(circle at center, var(--darker-bg) 0%, var(--dark-bg) 100%);
            overflow-x: hidden;
        }
        
        .battle-container {
            width: 800px;
            background-color: var(--card-bg);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            position: relative;
            border: 1px solid rgba(255,255,255,0.1);
            transform: perspective(1000px);
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: perspective(1000px) translateY(0) rotateX(0deg) rotateY(0deg); }
            50% { transform: perspective(1000px) translateY(-20px) rotateX(2deg) rotateY(1deg); }
        }
        
        .header {
            background: linear-gradient(135deg, var(--primary), #6c3483);
            color: white;
            padding: 15px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            font-family: 'Teko', sans-serif;
            letter-spacing: 1px;
            text-transform: uppercase;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent);
        }
        
        .brand-logo {
            height: 40px;
            margin-right: 15px;
            filter: drop-shadow(0 0 5px rgba(0,0,0,0.5));
        }
        
        .opponent {
            display: flex;
            justify-content: space-between;
            padding: 20px;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            color: white;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .player, .opponent-player {
            text-align: center;
            width: 45%;
            position: relative;
            z-index: 1;
        }
        
        .player::before, .opponent-player::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            height: 5px;
            background: var(--secondary);
            border-radius: 5px;
            opacity: 0.7;
            z-index: -1;
        }
        
        .opponent-player::before {
            background: var(--primary);
        }
        
        .avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background-color: rgba(255,255,255,0.1);
            margin: 0 auto 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 40px;
            color: var(--text);
            background-size: cover;
            background-position: center;
            border: 3px solid var(--secondary);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .avatar::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                rgba(255,255,255,0) 0%,
                rgba(255,255,255,0.1) 50%,
                rgba(255,255,255,0) 100%
            );
            transform: rotate(30deg);
            animation: shine 3s infinite;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%) rotate(30deg); }
            100% { transform: translateX(100%) rotate(30deg); }
        }
        
        .opponent-avatar {
            border-color: var(--primary);
        }
        
        .score-display {
            font-weight: bold;
            margin-top: 5px;
            font-size: 18px;
            text-shadow: 0 0 5px rgba(0,0,0,0.5);
        }
        
        .question-container {
            padding: 30px;
            min-height: 150px;
            position: relative;
            background: rgba(0,0,0,0.2);
        }
        
        .question {
            font-size: 22px;
            margin-bottom: 20px;
            text-align: center;
            animation: fadeIn 0.5s;
            line-height: 1.4;
            text-shadow: 0 0 5px rgba(0,0,0,0.5);
            position: relative;
            padding: 15px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            border-left: 4px solid var(--secondary);
        }
        
        .question::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        }
        
        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .option {
            background-color: rgba(46, 134, 193, 0.2);
            color: var(--text);
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            font-weight: bold;
            transition: all 0.3s;
            animation: slideIn 0.5s;
            border: 1px solid rgba(255,255,255,0.1);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(5px);
        }
        
        .option:hover {
            background-color: rgba(46, 134, 193, 0.4);
            transform: translateY(-3px) scale(1.03);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .option::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                135deg,
                rgba(255,255,255,0) 0%,
                rgba(255,255,255,0.05) 50%,
                rgba(255,255,255,0) 100%
            );
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }
        
        .option:hover::before {
            transform: translateX(100%);
        }
        
        .timer-container {
            height: 10px;
            background-color: rgba(255,255,255,0.1);
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
            position: relative;
        }
        
        .timer-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary), var(--primary));
            width: 100%;
            transition: width 1s linear;
            position: relative;
            box-shadow: 0 0 10px rgba(52, 152, 219, 0.5);
        }
        
        .timer-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                rgba(255,255,255,0.1) 0%,
                rgba(255,255,255,0.3) 50%,
                rgba(255,255,255,0.1) 100%
            );
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .score {
            display: flex;
            justify-content: space-between;
            padding: 15px 30px;
            background: linear-gradient(135deg, rgba(0,0,0,0.3), rgba(0,0,0,0.5));
            color: var(--text);
            font-weight: bold;
            font-size: 18px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        
        .result {
            text-align: center;
            padding: 20px;
            font-size: 24px;
            font-weight: bold;
            display: none;
            background: rgba(0,0,0,0.5);
            border-radius: 10px;
            margin-top: 20px;
            animation: pulse 1.5s infinite;
            text-shadow: 0 0 10px currentColor;
        }
        
        .start-screen, .end-screen {
            text-align: center;
            padding: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            background: rgba(0,0,0,0.3);
            min-height: 400px;
            justify-content: center;
        }
        
        .start-screen h2 {
            font-size: 32px;
            margin-bottom: 20px;
            color: var(--secondary);
            text-shadow: 0 0 10px rgba(52, 152, 219, 0.5);
            font-family: 'Teko', sans-serif;
            letter-spacing: 1px;
        }
        
        .start-screen p {
            margin-bottom: 10px;
            color: var(--text-dim);
            max-width: 80%;
            line-height: 1.6;
        }
        
        .start-screen p strong {
            color: var(--text);
        }
        
        button {
            background: linear-gradient(135deg, var(--secondary), #2980b9);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 30px;
            transition: all 0.3s;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                135deg,
                rgba(255,255,255,0) 0%,
                rgba(255,255,255,0.2) 50%,
                rgba(255,255,255,0) 100%
            );
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }
        
        button:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 20px rgba(0,0,0,0.4);
        }
        
        button:hover::before {
            transform: translateX(100%);
        }
        
        button:active {
            transform: translateY(0) scale(0.98);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideIn {
            from { 
                opacity: 0;
                transform: translateY(30px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .battle-effect {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            display: none;
            z-index: 10;
            opacity: 0;
            transition: opacity 0.5s;
        }
        
        .correct {
            background: linear-gradient(135deg, rgba(46, 204, 113, 0.3), rgba(39, 174, 96, 0.5)) !important;
            color: white !important;
            border-color: var(--correct) !important;
            animation: correctPulse 0.5s;
        }
        
        @keyframes correctPulse {
            0% { box-shadow: 0 0 0 0 rgba(46, 204, 113, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(46, 204, 113, 0); }
            100% { box-shadow: 0 0 0 0 rgba(46, 204, 113, 0); }
        }
        
        .wrong {
            background: linear-gradient(135deg, rgba(231, 76, 60, 0.3), rgba(192, 57, 43, 0.5)) !important;
            color: white !important;
            border-color: var(--wrong) !important;
            animation: wrongShake 0.5s;
        }
        
        @keyframes wrongShake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }
        
        .typing-indicator {
            display: inline-block;
            margin-left: 5px;
        }
        
        .typing-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            background-color: var(--primary);
            border-radius: 50%;
            margin: 0 2px;
            opacity: 0.4;
            animation: typingAnimation 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(1) {
            animation-delay: 0s;
        }
        
        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes typingAnimation {
            0%, 60%, 100% { transform: translateY(0); opacity: 0.4; }
            30% { transform: translateY(-5px); opacity: 1; }
        }
        
        .music-control {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.7);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: all 0.3s;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .music-control:hover {
            transform: scale(1.1);
            background: rgba(0,0,0,0.9);
        }
        
        .negative-mark {
            color: var(--wrong);
            font-weight: bold;
            animation: blink 0.5s 3;
            display: inline-block;
            margin-left: 5px;
        }
        
        .negative-score {
            color: var(--wrong);
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.2); }
        }
        
        .confetti {
            position: absolute;
            width: 15px;
            height: 15px;
            background-color: var(--primary);
            border-radius: 50%;
            animation: confettiFall 5s linear forwards;
            z-index: 1000;
        }
        
        @keyframes confettiFall {
            0% {
                transform: translateY(-100px) rotate(0deg) scale(0.5);
                opacity: 0;
            }
            10% {
                opacity: 1;
                transform: translateY(0) rotate(0deg) scale(1);
            }
            100% {
                transform: translateY(100vh) rotate(720deg) scale(1);
                opacity: 0;
            }
        }
        
        .victory-celebration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            display: none;
            backdrop-filter: blur(5px);
        }
        
        .victory-text {
            color: #f1c40f;
            font-size: 72px;
            font-weight: bold;
            text-shadow: 0 0 20px #e74c3c, 0 0 30px #e74c3c;
            margin-bottom: 30px;
            animation: pulse 1.5s infinite, glow 2s infinite alternate;
            font-family: 'Teko', sans-serif;
            letter-spacing: 3px;
            text-transform: uppercase;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        @keyframes glow {
            from { text-shadow: 0 0 10px #f1c40f, 0 0 20px #f1c40f; }
            to { text-shadow: 0 0 20px #f1c40f, 0 0 30px #f1c40f, 0 0 40px #f1c40f; }
        }
        
        .particle {
            position: absolute;
            width: 10px;
            height: 10px;
            background: var(--secondary);
            border-radius: 50%;
            pointer-events: none;
            z-index: 1;
        }
        
        .quiz-screen {
            position: relative;
            overflow: hidden;
        }
        
        .quiz-screen::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, transparent 0%, rgba(0,0,0,0.7) 100%);
            z-index: -1;
        }
        
        .final-score {
            font-size: 24px;
            margin: 10px 0;
            color: var(--text-dim);
        }
        
        .final-score span {
            color: var(--text);
            font-weight: bold;
        }
        
        .end-screen h2 {
            font-size: 42px;
            margin-bottom: 30px;
            font-family: 'Teko', sans-serif;
            letter-spacing: 2px;
            text-transform: uppercase;
        }
        
        .end-screen p {
            font-size: 20px;
            margin: 10px 0;
        }
        
        .fact-box {
            background: rgba(0,0,0,0.5);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid var(--primary);
            max-width: 80%;
            line-height: 1.6;
        }
        
        @media (max-width: 768px) {
            .battle-container {
                width: 95%;
                border-radius: 10px;
            }
            
            .header {
                font-size: 18px;
                padding: 10px;
            }
            
            .brand-logo {
                height: 30px;
                margin-right: 10px;
            }
            
            .question {
                font-size: 18px;
                padding: 10px;
            }
            
            .options {
                grid-template-columns: 1fr;
            }
            
            .avatar {
                width: 70px;
                height: 70px;
                font-size: 30px;
            }
            
            .start-screen, .end-screen {
                padding: 20px;
            }
            
            .start-screen h2 {
                font-size: 24px;
            }
            
            .victory-text {
                font-size: 36px;
            }
        }
    </style>
</head>
<body>
    <button class="music-control" id="music-control">♪</button>
    <audio id="background-music" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
    </audio>
    <audio id="correct-sound">
        <source src="https://www.soundjay.com/buttons/sounds/button-09.mp3" type="audio/mpeg">
    </audio>
    <audio id="wrong-sound">
        <source src="https://www.soundjay.com/buttons/sounds/button-10.mp3" type="audio/mpeg">
    </audio>
    <audio id="timeup-sound">
        <source src="https://www.soundjay.com/buttons/sounds/button-03.mp3" type="audio/mpeg">
    </audio>
    <audio id="victory-sound">
        <source src="https://www.soundjay.com/misc/sounds/sci-fi-positive-13.mp3" type="audio/mpeg">
    </audio>
    
    <div class="victory-celebration" id="victory-celebration">
        <div class="victory-text">জয়ী হয়েছেন!</div>
        <img src="https://i.ibb.co/xq9CHzSt/Genius-Nest.png" alt="Genius Nest" style="height: 200px;">
        <button id="continue-btn" style="margin-top: 30px;">চালিয়ে যান</button>
    </div>
    
    <div class="battle-container">
        <div class="header">
            <img src="https://i.ibb.co/xq9CHzSt/Genius-Nest.png" alt="Genius Nest" class="brand-logo">
            <span>ইতিহাসের যুদ্ধ | History Battle</span>
        </div>
        
        <div class="opponent">
            <div class="player">
                <div class="avatar">😎</div>
                <div>আপনি</div>
                <div class="score-display">স্কোর: <span id="player-score">0</span></div>
            </div>
            <div class="opponent-player">
                <div class="avatar opponent-avatar" id="opponent-avatar">👨</div>
                <div id="opponent-name">প্রতিদ্বন্দ্বী</div>
                <div class="score-display">স্কোর: <span id="opponent-score">0</span></div>
                <div id="typing-status" style="display:none;"><span class="typing-indicator"><span class="typing-dot"></span><span class="typing-dot"></span><span class="typing-dot"></span></span> উত্তর দিচ্ছে...</div>
            </div>
        </div>
        
        <div class="timer-container">
            <div class="timer-bar" id="timer"></div>
        </div>
        
        <div class="question-container">
            <div class="start-screen" id="start-screen">
                <h2>ইতিহাসের যুদ্ধে স্বাগতম!</h2>
                <p>৫টি ইতিহাস প্রশ্নের উত্তর দিন ২০ সেকেন্ডের মধ্যে</p>
                <p><strong>নতুন নিয়ম:</strong> সঠিক উত্তরের জন্য +১ পয়েন্ট, ভুল উত্তরের জন্য -০.৫ পয়েন্ট</p>
                <p>স্কোর নেগেটিভ হতে পারে!</p>
                <p>একজন বাস্তব প্রতিপক্ষের সাথে আপনার জ্ঞানের পরীক্ষা করুন</p>
                <button id="start-btn">যুদ্ধ শুরু করুন</button>
                
                <!-- Animated particles for background -->
                <div id="start-particles"></div>
            </div>
            
            <div class="quiz-screen" id="quiz-screen" style="display: none;">
                <div class="question" id="question"></div>
                <div class="options" id="options"></div>
            </div>
            
            <div class="result" id="result"></div>
            
            <div class="end-screen" id="end-screen" style="display: none;">
                <h2 id="final-result"></h2>
                <p class="final-score">আপনার স্কোর: <span id="final-player-score">0</span></p>
                <p class="final-score">প্রতিপক্ষের স্কোর: <span id="final-opponent-score">0</span></p>
                <div class="fact-box" id="final-fact"></div>
                <button id="restart-btn">আবার খেলুন</button>
            </div>
        </div>
        
        <div class="score">
            <div>প্রশ্ন: <span id="current-question">0</span>/5</div>
            <div>সময়: <span id="time-left">20</span>s</div>
        </div>
        
        <div class="battle-effect" id="battle-effect"></div>
    </div>

    <script>
        // Enhanced human-like opponent names and avatars
        const opponents = [
            {name: "রিয়াদ", avatar: "👨", bio: "ইতিহাসের শিক্ষক", accuracy: 0.85, speed: 6000, color: "#8e44ad"},
            {name: "তানিয়া", avatar: "👩", bio: "ইতিহাসবিদ", accuracy: 0.9, speed: 3000, color: "#e74c3c"},
            {name: "আরাফাত", avatar: "🧔", bio: "প্রতিযোগিতামূলক পরীক্ষার প্রস্তুতিকারক", accuracy: 0.8, speed: 10000, color: "#3498db"},
            {name: "সুমিত", avatar: "👨‍💻", bio: "Engineer", accuracy: 0.95, speed: 1000, color: "#2ecc71"},
            {name: "সাকিব", avatar: "🧑", bio: "ইতিহাস ব্লগার", accuracy: 0.75, speed: 5000, color: "#f1c40f"}
        ];
        
        // Enhanced questions pool with more details
        const questionsPool = [
            {
                question: "ভারতের প্রথম প্রধানমন্ত্রী কে ছিলেন?",
                options: ["জওহরলাল নেহেরু", "মহাত্মা গান্ধী", "ইন্দিরা গান্ধী", "সর্দার প্যাটেল"],
                answer: 0,
                fact: "জওহরলাল নেহেরু ১৯৪৭ সালে ভারতের প্রথম প্রধানমন্ত্রী হন এবং ১৯৬৪ পর্যন্ত দায়িত্ব পালন করেন।"
            },
            {
                question: "কে 'আইন অমান্য আন্দোলন' শুরু করেছিলেন?",
                options: ["ভগৎ সিং", "মহাত্মা গান্ধী", "সুভাষ চন্দ্র বসু", "বাল গঙ্গাধর তিলক"],
                answer: 1,
                fact: "গান্ধীজি ১৯৩০ সালে ডান্ডি মার্চের মাধ্যমে ব্রিটিশ লবণ করের বিরুদ্ধে আইন অমান্য আন্দোলন শুরু করেন।"
            },
            {
                question: "ভারতীয় জাতীয় কংগ্রেস কত সালে প্রতিষ্ঠিত হয়?",
                options: ["১৮৮৫", "১৯০৫", "১৯১৯", "১৮৫৭"],
                answer: 0,
                fact: "এও হিউম ১৮৮৫ সালে মুম্বাইয়ে কংগ্রেস প্রতিষ্ঠা করেন, যা পরে স্বাধীনতা আন্দোলনে প্রধান ভূমিকা পালন করে।"
            },
            {
                question: "কে 'জয় হিন্দ' স্লোগান দিয়েছিলেন?",
                options: ["মহাত্মা গান্ধী", "সুভাষ চন্দ্র বসু", "ভগৎ সিং", "চন্দ্রশেখর আজাদ"],
                answer: 1,
                fact: "সুভাষ চন্দ্র বসু ১৯৪২ সালে আজাদ হিন্দ ফৌজের জন্য 'জয় হিন্দ' স্লোগান চালু করেন।"
            },
            {
                question: "ভারতের প্রথম মহিলা প্রধানমন্ত্রী কে ছিলেন?",
                options: ["ইন্দিরা গান্ধী", "প্রতিভা পাটিল", "সোনিয়া গান্ধী", "মমতা ব্যানার্জী"],
                answer: 0,
                fact: "ইন্দিরা গান্ধী ১৯৬৬ সালে ভারতের প্রথম মহিলা প্রধানমন্ত্রী হন এবং 'লৌহ মানবী' নামে পরিচিত ছিলেন।"
            },
            {
                question: "কে 'ভারত মাতা' চিত্রটি আঁকেন?",
                options: ["রবীন্দ্রনাথ ঠাকুর", "অবনীন্দ্রনাথ ঠাকুর", "মকবুল ফিদা হুসেন", "নন্দলাল বসু"],
                answer: 1,
                fact: "অবনীন্দ্রনাথ ঠাকুর ১৯০৫ সালে বিখ্যাত 'ভারত মাতা' চিত্রটি অঙ্কন করেন।"
            },
            {
                question: "সিপাহী বিদ্রোহ কত সালে শুরু হয়?",
                options: ["১৮৫৭", "১৯৪২", "১৯১৯", "১৯০৫"],
                answer: 0,
                fact: "১৮৫৭ সালের বিদ্রোহকে ভারতের প্রথম স্বাধীনতা সংগ্রাম হিসেবেও বিবেচনা করা হয়, যা মিরাট থেকে শুরু হয়েছিল।"
            },
            {
                question: "কে 'ভারতরত্ন' পুরস্কার প্রবর্তন করেন?",
                options: ["জওহরলাল নেহেরু", "রাজেন্দ্র প্রসাদ", "সরদার প্যাটেল", "ড. রাজেন্দ্র প্রসাদ"],
                answer: 1,
                fact: "ভারতের প্রথম রাষ্ট্রপতি ড. রাজেন্দ্র প্রসাদ ১৯৫৪ সালে এই সর্বোচ্চ বেসামরিক পুরস্কার চালু করেন।"
            },
            {
                question: "তাজমহল কে নির্মাণ করেছিলেন?",
                options: ["আকবর", "শাহজাহান", "জাহাঙ্গীর", "হুমায়ুন"],
                answer: 1,
                fact: "মুঘল সম্রাট শাহজাহান ১৬৩২ সালে তার স্ত্রী মমতাজ মহলের স্মৃতিতে তাজমহল নির্মাণ করেন।"
            },
            {
                question: "কে 'আর্য সমাজ' প্রতিষ্ঠা করেছিলেন?",
                options: ["রাজা রামমোহন রায়", "স্বামী বিবেকানন্দ", "দয়ানন্দ সরস্বতী", "রামকৃষ্ণ পরমহংস"],
                answer: 2,
                fact: "স্বামী দয়ানন্দ সরস্বতী ১৮৭৫ সালে হিন্দু সংস্কার আন্দোলনের জন্য আর্য সমাজ প্রতিষ্ঠা করেন।"
            },
            {
                question: "ভারতের সংবিধান কত সালে গৃহীত হয়?",
                options: ["১৯৪৭", "১৯৪৯", "১৯৫০", "১৯৫২"],
                answer: 2,
                fact: "২৬ নভেম্বর ১৯৪৯ সালে সংবিধান গৃহীত হয় এবং ২৬ জানুয়ারি ১৯৫০ সালে কার্যকর হয় (প্রজাতন্ত্র দিবস)।"
            },
            {
                question: "কে 'বন্দে মাতরম' গানটি রচনা করেছিলেন?",
                options: ["রবীন্দ্রনাথ ঠাকুর", "বঙ্কিমচন্দ্র চট্টোপাধ্যায়", "শরৎচন্দ্র চট্টোপাধ্যায়", "ইকবাল"],
                answer: 1,
                fact: "বঙ্কিমচন্দ্র চট্টোপাধ্যায় ১৮৮২ সালে 'আনন্দমঠ' উপন্যাসে 'বন্দে মাতরম' গানটি অন্তর্ভুক্ত করেন।"
            },
            {
                question: "ভারতের জাতীয় পতাকা কে ডিজাইন করেছিলেন?",
                options: ["মহাত্মা গান্ধী", "বাদামী রাজা", "পিংলি ভেঙ্কাইয়া", "জওহরলাল নেহেরু"],
                answer: 2,
                fact: "পিংলি ভেঙ্কাইয়া ১৯২১ সালে ত্রিবর্ণরঞ্জিত পতাকার নকশা প্রস্তাব করেন যা ১৯৪৭ সালে গৃহীত হয়।"
            },
            {
                question: "কে 'ইন্ডিয়ান অ্যাসোসিয়েশন' প্রতিষ্ঠা করেছিলেন?",
                options: ["সুরেন্দ্রনাথ ব্যানার্জী", "বাল গঙ্গাধর তিলক", "দাদাভাই নওরোজি", "ফিরোজ শাহ মেহতা"],
                answer: 0,
                fact: "সুরেন্দ্রনাথ ব্যানার্জী ১৮৭৬ সালে ইন্ডিয়ান অ্যাসোসিয়েশন প্রতিষ্ঠা করেন যা 'ভারতীয় জাতীয় কংগ্রেসের অগ্রদূত' হিসেবে বিবেচিত।"
            },
            {
                question: "কে 'দ্য ডিসকভারি অফ ইন্ডিয়া' বইটি লিখেছেন?",
                options: ["মহাত্মা গান্ধী", "জওহরলাল নেহেরু", "রবীন্দ্রনাথ ঠাকুর", "সুভাষ চন্দ্র বসু"],
                answer: 1,
                fact: "জওহরলাল নেহেরু ১৯৪৪ সালে আহমেদনগর দুর্গে কারাবাসকালে এই বইটি লিখেছিলেন।"
            },
            {
                question: "মুঘল সাম্রাজ্যের প্রতিষ্ঠাতা কে?",
                options: ["আকবর", "হুমায়ুন", "বাবর", "শের শাহ"],
                answer: 2,
                fact: "বাবর 1526 সালে পানিপথের যুদ্ধে ইব্রাহিম লোদীকে পরাজিত করে মুঘল সাম্রাজ্য প্রতিষ্ঠা করেন।"
            },
            {
                question: "কোন সালে বাংলাদেশ স্বাধীনতা অর্জন করে?",
                options: ["১৯৭০", "১৯৭১", "১৯৭২", "১৯৬৯"],
                answer: 1,
                fact: "বাংলাদেশ ১৯৭১ সালের ১৬ই ডিসেম্বর পাকিস্তান থেকে স্বাধীনতা অর্জন করে।"
            },
            {
                question: "বাংলাদেশের জাতীয় সঙ্গীতের রচয়িতা কে?",
                options: ["রবীন্দ্রনাথ ঠাকুর", "কাজী নজরুল ইসলাম", "ডি.এল. রায়", "আতাউর রহমান খান"],
                answer: 0,
                fact: "রবীন্দ্রনাথ ঠাকুর 'আমার সোনার বাংলা' গানটি রচনা করেন যা বাংলাদেশের জাতীয় সঙ্গীত।"
            }
        ];
        
        // Game variables
        let currentQuestion = 0;
        let playerScore = 0;
        let opponentScore = 0;
        let timer;
        let timeLeft = 20;
        let selectedOpponent;
        let selectedQuestions = [];
        let opponentTimeout;
        let musicPlaying = false;
        let usedQuestionIndices = [];
        let particles = [];
        
        // DOM elements
        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const endScreen = document.getElementById('end-screen');
        const questionElement = document.getElementById('question');
        const optionsElement = document.getElementById('options');
        const playerScoreElement = document.getElementById('player-score');
        const opponentScoreElement = document.getElementById('opponent-score');
        const currentQuestionElement = document.getElementById('current-question');
        const timeLeftElement = document.getElementById('time-left');
        const timerBar = document.getElementById('timer');
        const resultElement = document.getElementById('result');
        const finalResultElement = document.getElementById('final-result');
        const finalPlayerScoreElement = document.getElementById('final-player-score');
        const finalOpponentScoreElement = document.getElementById('final-opponent-score');
        const finalFactElement = document.getElementById('final-fact');
        const startBtn = document.getElementById('start-btn');
        const restartBtn = document.getElementById('restart-btn');
        const opponentNameElement = document.getElementById('opponent-name');
        const opponentAvatarElement = document.getElementById('opponent-avatar');
        const typingStatusElement = document.getElementById('typing-status');
        const battleEffect = document.getElementById('battle-effect');
        const backgroundMusic = document.getElementById('background-music');
        const correctSound = document.getElementById('correct-sound');
        const wrongSound = document.getElementById('wrong-sound');
        const timeupSound = document.getElementById('timeup-sound');
        const victorySound = document.getElementById('victory-sound');
        const musicControl = document.getElementById('music-control');
        const victoryCelebration = document.getElementById('victory-celebration');
        const continueBtn = document.getElementById('continue-btn');
        const startParticlesContainer = document.getElementById('start-particles');
        
        // Start game
        startBtn.addEventListener('click', startGame);
        restartBtn.addEventListener('click', startGame);
        continueBtn.addEventListener('click', () => {
            victoryCelebration.style.display = 'none';
            endScreen.style.display = 'block';
        });
        
        // Music control
        musicControl.addEventListener('click', toggleMusic);
        
        // Create animated particles for start screen
        function createParticles() {
            const colors = ['#8e44ad', '#3498db', '#2ecc71', '#f1c40f', '#e74c3c'];
            
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                particle.style.width = Math.random() * 15 + 5 + 'px';
                particle.style.height = particle.style.width;
                particle.style.left = Math.random() * 100 + 'vw';
                particle.style.top = Math.random() * 100 + 'vh';
                
                const animationDuration = Math.random() * 20 + 10;
                const animationDelay = Math.random() * 5;
                
                particle.style.animation = `float ${animationDuration}s ease-in-out ${animationDelay}s infinite`;
                particle.style.opacity = Math.random() * 0.5 + 0.1;
                
                startParticlesContainer.appendChild(particle);
                particles.push({
                    element: particle,
                    x: Math.random() * window.innerWidth,
                    y: Math.random() * window.innerHeight,
                    speedX: (Math.random() - 0.5) * 0.5,
                    speedY: (Math.random() - 0.5) * 0.5
                });
            }
        }
        
        function toggleMusic() {
            if (musicPlaying) {
                backgroundMusic.pause();
                musicControl.textContent = '♪';
                musicPlaying = false;
            } else {
                backgroundMusic.play();
                musicControl.textContent = '🔊';
                musicPlaying = true;
            }
        }
        
        function createConfetti() {
            const colors = ['#8e44ad', '#3498db', '#2ecc71', '#f1c40f', '#e74c3c', '#1abc9c', '#9b59b6'];
            const container = document.body;
            
            for (let i = 0; i < 150; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.width = Math.random() * 15 + 5 + 'px';
                confetti.style.height = Math.random() * 10 + 5 + 'px';
                confetti.style.animationDuration = Math.random() * 3 + 2 + 's';
                confetti.style.animationDelay = Math.random() * 2 + 's';
                
                // Random shape (circle or square)
                if (Math.random() > 0.5) {
                    confetti.style.borderRadius = '50%';
                } else {
                    confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                }
                
                container.appendChild(confetti);
                
                // Remove confetti after animation
                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }
        }
        
        function showVictoryCelebration() {
            victoryCelebration.style.display = 'flex';
            createConfetti();
            victorySound.play();
            backgroundMusic.pause();
        }
        
        function startGame() {
            // Clear existing particles
            particles.forEach(p => p.element.remove());
            particles = [];
            
            // Reset game state
            currentQuestion = 0;
            playerScore = 0;
            opponentScore = 0;
            timeLeft = 20;
            usedQuestionIndices = [];
            
            // Select random opponent
            selectedOpponent = opponents[Math.floor(Math.random() * opponents.length)];
            opponentNameElement.textContent = `${selectedOpponent.name} (${selectedOpponent.bio})`;
            opponentAvatarElement.textContent = selectedOpponent.avatar;
            opponentAvatarElement.style.borderColor = selectedOpponent.color;
            
            // Select 5 unique random questions
            selectedQuestions = [];
            while(selectedQuestions.length < 5) {
                const randomIndex = Math.floor(Math.random() * questionsPool.length);
                if(!usedQuestionIndices.includes(randomIndex)) {
                    selectedQuestions.push(questionsPool[randomIndex]);
                    usedQuestionIndices.push(randomIndex);
                }
            }
            
            // Update UI
            updateScoreDisplay();
            currentQuestionElement.textContent = currentQuestion + 1;
            
            // Show quiz screen
            startScreen.style.display = 'none';
            endScreen.style.display = 'none';
            victoryCelebration.style.display = 'none';
            quizScreen.style.display = 'block';
            resultElement.style.display = 'none';
            
            // Start music
            backgroundMusic.play();
            musicControl.textContent = '🔊';
            musicPlaying = true;
            
            // Load first question
            loadQuestion();
        }
        
        function updateScoreDisplay() {
            // Update player score with color coding for negative values
            if (playerScore < 0) {
                playerScoreElement.innerHTML = `<span class="negative-score">${playerScore.toFixed(1)}</span>`;
            } else {
                playerScoreElement.textContent = playerScore.toFixed(1);
            }
            
            // Update opponent score with color coding for negative values
            if (opponentScore < 0) {
                opponentScoreElement.innerHTML = `<span class="negative-score">${opponentScore.toFixed(1)}</span>`;
            } else {
                opponentScoreElement.textContent = opponentScore.toFixed(1);
            }
        }
        
        function loadQuestion() {
            // Reset timer
            clearInterval(timer);
            clearTimeout(opponentTimeout);
            timeLeft = 20;
            timeLeftElement.textContent = timeLeft;
            timerBar.style.width = '100%';
            typingStatusElement.style.display = 'none';
            
            // Update question counter
            currentQuestionElement.textContent = currentQuestion + 1;
            
            // Load question
            const q = selectedQuestions[currentQuestion];
            questionElement.textContent = q.question;
            
            // Load options
            optionsElement.innerHTML = '';
            q.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.classList.add('option');
                optionElement.textContent = option;
                optionElement.addEventListener('click', () => selectOption(index));
                optionsElement.appendChild(optionElement);
            });
            
            // Start timer
            timer = setInterval(updateTimer, 1000);
            
            // Opponent will answer after a variable time based on their profile
            const opponentAnswerTime = Math.floor(Math.random() * selectedOpponent.speed * 0.4) + selectedOpponent.speed * 0.8;
            
            // Show typing indicator a few seconds before answering
            const typingIndicatorTime = opponentAnswerTime - 3000;
            opponentTimeout = setTimeout(() => {
                typingStatusElement.style.display = 'block';
            }, typingIndicatorTime > 0 ? typingIndicatorTime : 0);
            
            opponentTimeout = setTimeout(opponentAnswer, opponentAnswerTime);
        }
        
        function updateTimer() {
            timeLeft--;
            timeLeftElement.textContent = timeLeft;
            timerBar.style.width = `${(timeLeft / 20) * 100}%`;
            
            // Change timer color when time is running out
            if (timeLeft <= 5) {
                timerBar.style.background = `linear-gradient(90deg, var(--wrong), #c0392b)`;
                timerBar.style.boxShadow = `0 0 10px rgba(231, 76, 60, 0.5)`;
            }
            
            if (timeLeft <= 0) {
                clearInterval(timer);
                timeUp();
            }
        }
        
        function selectOption(selectedIndex) {
            clearInterval(timer);
            clearTimeout(opponentTimeout);
            
            const q = selectedQuestions[currentQuestion];
            const options = document.querySelectorAll('.option');
            
            // Disable all options
            options.forEach(option => {
                option.style.pointerEvents = 'none';
            });
            
            // Hide typing indicator
            typingStatusElement.style.display = 'none';
            
            // Check answer
            if (selectedIndex === q.answer) {
                // Correct answer - add 1 point
                playerScore += 1;
                options[selectedIndex].classList.add('correct');
                showResult('ঠিক উত্তর! +১', '#2ecc71');
                correctSound.play();
                
                // Show fact after delay
                setTimeout(() => {
                    resultElement.textContent = q.fact;
                    resultElement.style.display = 'block';
                }, 1500);
            } else {
                // Wrong answer - subtract 0.5 point
                playerScore -= 0.5;
                options[selectedIndex].classList.add('wrong');
                options[q.answer].classList.add('correct');
                
                // Show negative marking animation
                const negativeMark = document.createElement('span');
                negativeMark.classList.add('negative-mark');
                negativeMark.textContent = '-০.৫';
                playerScoreElement.appendChild(negativeMark);
                setTimeout(() => {
                    negativeMark.remove();
                }, 1000);
                
                showResult('ভুল উত্তর! -০.৫', '#e74c3c');
                wrongSound.play();
            }
            
            // Update score display
            updateScoreDisplay();
            
            // Move to next question after delay
            setTimeout(nextQuestion, 3000);
        }
        
        function opponentAnswer() {
            const q = selectedQuestions[currentQuestion];
            const options = document.querySelectorAll('.option');
            
            // If time hasn't run out and player hasn't answered
            if (timeLeft > 0 && options[0].style.pointerEvents !== 'none') {
                clearInterval(timer);
                
                // Opponent answers based on their accuracy
                const isCorrect = Math.random() < selectedOpponent.accuracy;
                let opponentSelected;
                
                if (isCorrect) {
                    opponentSelected = q.answer;
                    opponentScore += 1;
                } else {
                    // Select wrong answer randomly
                    const wrongOptions = q.options.filter((_, index) => index !== q.answer);
                    const wrongIndex = q.options.indexOf(wrongOptions[Math.floor(Math.random() * wrongOptions.length)]);
                    opponentSelected = wrongIndex;
                    opponentScore -= 0.5;
                }
                
                // Show opponent's answer
                options.forEach(option => {
                    option.style.pointerEvents = 'none';
                });
                
                typingStatusElement.style.display = 'none';
                
                options[opponentSelected].classList.add(isCorrect ? 'correct' : 'wrong');
                if (!isCorrect) options[q.answer].classList.add('correct');
                
                // Update score display
                updateScoreDisplay();
                
                if (isCorrect) {
                    showResult(`${selectedOpponent.name} সঠিক উত্তর দিয়েছেন! +১`, '#2ecc71');
                    correctSound.play();
                } else {
                    showResult(`${selectedOpponent.name} ভুল উত্তর দিয়েছেন! -০.৫`, '#e74c3c');
                    wrongSound.play();
                }
                
                // Move to next question after delay
                setTimeout(nextQuestion, 3000);
            }
        }
        
        function timeUp() {
            const q = selectedQuestions[currentQuestion];
            const options = document.querySelectorAll('.option');
            
            options.forEach(option => {
                option.style.pointerEvents = 'none';
            });
            
            typingStatusElement.style.display = 'none';
            
            options[q.answer].classList.add('correct');
            showResult('সময় শেষ!', '#e74c3c');
            timeupSound.play();
            
            // Move to next question after delay
            setTimeout(nextQuestion, 3000);
        }
        
        function showResult(message, color) {
            resultElement.textContent = message;
            resultElement.style.color = color;
            resultElement.style.display = 'block';
            
            // Battle effect
            battleEffect.style.display = 'block';
            battleEffect.style.background = `radial-gradient(circle, ${color}40 0%, transparent 70%)`;
            battleEffect.style.opacity = '0.8';
            setTimeout(() => {
                battleEffect.style.opacity = '0';
                setTimeout(() => {
                    battleEffect.style.display = 'none';
                }, 500);
            }, 1000);
        }
        
        function nextQuestion() {
            resultElement.style.display = 'none';
            currentQuestion++;
            
            if (currentQuestion < selectedQuestions.length) {
                loadQuestion();
            } else {
                endGame();
            }
        }
        
        function endGame() {
            quizScreen.style.display = 'none';
            
            // Update final scores with color coding for negative values
            if (playerScore < 0) {
                finalPlayerScoreElement.innerHTML = `<span class="negative-score">${playerScore.toFixed(1)}</span>`;
            } else {
                finalPlayerScoreElement.textContent = playerScore.toFixed(1);
            }
            
            if (opponentScore < 0) {
                finalOpponentScoreElement.innerHTML = `<span class="negative-score">${opponentScore.toFixed(1)}</span>`;
            } else {
                finalOpponentScoreElement.textContent = opponentScore.toFixed(1);
            }
            
            // Show an interesting fact from one of the questions
            const randomQuestion = selectedQuestions[Math.floor(Math.random() * selectedQuestions.length)];
            finalFactElement.textContent = randomQuestion.fact;
            
            if (playerScore > opponentScore) {
                finalResultElement.textContent = 'আপনি জয়ী হয়েছেন!';
                finalResultElement.style.color = '#2ecc71';
                showVictoryCelebration();
            } else if (playerScore < opponentScore) {
                finalResultElement.textContent = `${selectedOpponent.name} জয়ী হয়েছেন!`;
                finalResultElement.style.color = '#e74c3c';
                endScreen.style.display = 'block';
            } else {
                finalResultElement.textContent = 'খেলা ড্র হয়েছে!';
                finalResultElement.style.color = '#3498db';
                endScreen.style.display = 'block';
            }
        }
        
        // Initialize particles on start screen
        createParticles();
        
        // Animate particles
        function animateParticles() {
            particles.forEach(particle => {
                particle.x += particle.speedX;
                particle.y += particle.speedY;
                
                // Bounce off edges
                if (particle.x <= 0 || particle.x >= window.innerWidth) {
                    particle.speedX *= -1;
                }
                if (particle.y <= 0 || particle.y >= window.innerHeight) {
                    particle.speedY *= -1;
                }
                
                particle.element.style.left = particle.x + 'px';
                particle.element.style.top = particle.y + 'px';
            });
            
            requestAnimationFrame(animateParticles);
        }
        
        animateParticles();
    </script>
</body>
</html>
